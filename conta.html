<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Conta ‚Ä¢ Missio Dei Hub</title>
  <link rel="manifest" href="manifest.json">
  <meta name="theme-color" content="#142a47">
  <link rel="stylesheet" href="styles.css" />
</head>
<body class="appBody">
  <header class="appHeader">
    <a class="btnGhost small" href="app.html">? Voltar</a>
    <div class="pageTitle">?? Conta</div>
    <a class="btnGhost small" href="index.html">Site</a>
  </header>

  <main class="appMain">
    <div class="stack">

      <section id="login" class="panel">
        <h2>Acesso</h2>
        <p class="muted">Sem backend por enquanto: este login √© apenas para simular a √°rea do assinante.</p>

        <div class="formRow">
          <input class="input" id="nome" placeholder="Seu nome" />
          <input class="input" id="email" placeholder="Seu e-mail" />
        </div>

        <div class="formRow">
          <select class="input" id="plano">
            <option value="basico">Plano B√°sico (R$7,90)</option>
            <option value="premium">Plano Premium (R$27,90)</option>
          </select>
          <button class="btnPrimary" id="salvar">Salvar</button>
        </div>

        <div class="muted" id="status"></div>
      </section>

      <section id="planos" class="panel">
        <h2>Assinaturas</h2>
        <p class="muted">Como voc√™ n√£o vai investir agora, a assinatura pode ser feita por WhatsApp.</p>

        <!-- TROQUE O N√öMERO ABAIXO PELO WHATSAPP OFICIAL -->
        <div class="twoCols">
          <a class="btnPrimary full" id="waBasico" href="#">Assinar B√°sico via WhatsApp</a>
          <a class="btnGhost full" id="waPremium" href="#">Assinar Premium via WhatsApp</a>
        </div>

        <div class="notice">
          <b>Ap√≥s o pagamento</b>, o assinante envia comprovante + nome + e-mail + cidade.
          Voc√™ libera o acesso (mais tarde automatizamos).
        </div>
      </section>

      <section id="devocional" class="panel">
        <h2>Devocional</h2>
        <p class="muted">Aqui entra sua leitura di√°ria. (Pr√≥ximo passo: carregar conte√∫do por JSON.)</p>
      </section>

      <section id="biblia" class="panel">
        <h2>B√≠blia Online (Gr√°tis)</h2>
        <p class="muted">Aqui voc√™ pode colocar links para leitura online. (Pr√≥ximo passo: integrar texto.)</p>
      </section>

      <section id="missao" class="panel">
        <h2>Fazer parte da Miss√£o</h2>
        <p class="muted">Ofertas espor√°dicas e compromisso mensal.</p>
        <a class="btnPrimary full" href="#" id="waMissao">Quero apoiar a miss√£o via WhatsApp</a>
      </section>

    </div>
  </main>

  <nav class="bottomNav">
    <a class="navItem" href="app.html">??<span>Home</span></a>
    <a class="navItem" href="desafio.html">??<span>Desafio</span></a>
    <a class="navItem" href="kids.html">??<span>Kids</span></a>
    <a class="navItem" href="cursos.html">??<span>Cursos</span></a>
    <a class="navItem active" href="conta.html">??<span>Conta</span></a>
  </nav>

  <script src="app.js"></script>
  <script>
   

// ===============================
// CAPTURA PRODUTO E PRE√áO
// ===============================
const params = new URLSearchParams(window.location.search);
const produto = params.get("produto") || "E-book";
const preco = params.get("preco") || "0";

const precoOriginal = parseFloat(preco.replace(",", "."));

document.getElementById("produtoNome").innerText = produto;
document.getElementById("produtoDesc").innerText = "Valor original: R$ " + preco;


// ===============================
// CALCULAR DESCONTO AUTOM√ÅTICO
// ===============================
function calcularDesconto() {

  const planoSalvo = localStorage.getItem("plano");

  let precoFinal = precoOriginal;
  let porcentagem = 0;

  if (planoSalvo === "basico") {
    precoFinal = precoOriginal * 0.8;
    porcentagem = 20;
  }

  if (planoSalvo === "premium") {
    precoFinal = precoOriginal * 0.5;
    porcentagem = 50;
  }

  document.getElementById("valorFinal").innerText = precoFinal.toFixed(2);

  const badge = document.getElementById("badgeDesconto");
  const oferta = document.getElementById("ofertaUpgrade");
  const botao = document.getElementById("btnUpgrade");

  // Badge desconto
  if (porcentagem > 0) {
    badge.style.display = "block";
    badge.innerText = "Voc√™ economizou " + porcentagem + "% üéâ";
  } else {
    badge.style.display = "none";
  }

  // Oferta para n√£o assinante
  if (!planoSalvo) {
    oferta.innerText = "üí° Assine o Plano B√°sico e economize 20% nesta compra!";
    botao.style.display = "inline-block";
  } else {
    oferta.innerText = "";
    botao.style.display = "none";
  }

}

// Executa ao carregar p√°gina
calcularDesconto();


// ===============================
// FINALIZAR COMPRA
// ===============================
function finalizar() {

  const nome = document.getElementById("nome").value;
  const email = document.getElementById("email").value;
  const pagamento = document.getElementById("pagamento").value;
  const plano = localStorage.getItem("plano") || "nenhum";

  if (!nome || !email) {
    alert("Preencha nome e email.");
    return;
  }

  let precoFinal = precoOriginal;

  if (plano === "basico") {
    precoFinal = precoOriginal * 0.8;
  }

  if (plano === "premium") {
    precoFinal = precoOriginal * 0.5;
  }

  const numero = "5519SEUNUMEROAQUI"; // ‚ö†Ô∏è coloque seu n√∫mero real

  const mensagem = `
Ol√°, quero comprar no Missio Dei Hub.

Produto: ${produto}
Plano: ${plano}
Valor final: R$ ${precoFinal.toFixed(2)}
Forma de pagamento: ${pagamento}

Nome: ${nome}
Email: ${email}
`;

  const url = `https://wa.me/${numero}?text=${encodeURIComponent(mensagem)}`;

  window.open(url, "_blank");
}

</script>
  </script>
</body>

</html>
